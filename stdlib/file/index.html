<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=../../assets/images/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.4.0"><title>File</title><link rel=stylesheet href=../../assets/stylesheets/main.fe0cca5b.min.css><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-1855461-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#usage class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../.. title="Yona Language" class="md-header-nav__button md-logo" aria-label="Yona Language"> <img src=../../assets/images/logo.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Yona Language </span> <span class="md-header-nav__topic md-ellipsis"> File </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/yona-lang/yona/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> yona-lang/yona </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Yona Language" class="md-nav__button md-logo" aria-label="Yona Language"> <img src=../../assets/images/logo.png alt=logo> </a> Yona Language </label> <div class=md-nav__source> <a href=https://github.com/yona-lang/yona/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> yona-lang/yona </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title="Yona Language" class=md-nav__link> Yona Language </a> </li> <li class=md-nav__item> <a href=../../about/ title="About Yona" class=md-nav__link> About Yona </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Getting started <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Getting started" data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting_started/installation/ title=Installation class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../../getting_started/release-notes/ title="Release Notes" class=md-nav__link> Release Notes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../syntax/ title=Syntax class=md-nav__link> Syntax </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Features <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Features data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../features/data-types/ title="Data Types" class=md-nav__link> Data Types </a> </li> <li class=md-nav__item> <a href=../../features/module-loader/ title="Module Loader" class=md-nav__link> Module Loader </a> </li> <li class=md-nav__item> <a href=../../features/operators/ title=Operators class=md-nav__link> Operators </a> </li> <li class=md-nav__item> <a href=../../features/pattern-matching/ title="Pattern Matching" class=md-nav__link> Pattern Matching </a> </li> <li class=md-nav__item> <a href=../../features/polyglot/ title=Polyglot class=md-nav__link> Polyglot </a> </li> <li class=md-nav__item> <a href=../../features/resource-management/ title="Resource Management" class=md-nav__link> Resource Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6 checked> <label class=md-nav__link for=nav-6> Standard Library <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Standard Library" data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Standard Library </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../dict/ title=Dict class=md-nav__link> Dict </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> File <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title=File class="md-nav__link md-nav__link--active"> File </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#usage class=md-nav__link> Usage </a> <nav class=md-nav aria-label=Usage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#opening-a-file class=md-nav__link> Opening a file </a> </li> <li class=md-nav__item> <a href=#opening-closing class=md-nav__link> Opening and closing files with context managers </a> </li> <li class=md-nav__item> <a href=#deleting-a-file class=md-nav__link> Deleting a file </a> </li> <li class=md-nav__item> <a href=#seeking-to-a-position-in-a-file class=md-nav__link> Seeking to a position in a file </a> </li> <li class=md-nav__item> <a href=#creating-a-temporary-file class=md-nav__link> Creating a temporary file </a> </li> <li class=md-nav__item> <a href=#obtaining-a-path-from-a-file-handle class=md-nav__link> Obtaining a path from a file handle </a> </li> <li class=md-nav__item> <a href=#listing-files-in-a-directory class=md-nav__link> Listing files in a directory </a> </li> <li class=md-nav__item> <a href=#read-lines class=md-nav__link> Reading file - line mode </a> </li> <li class=md-nav__item> <a href=#reading-file-all-at-once class=md-nav__link> Reading file - all at once </a> </li> <li class=md-nav__item> <a href=#writing-to-file class=md-nav__link> Writing to file </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../io/ title=IO class=md-nav__link> IO </a> </li> <li class=md-nav__item> <a href=../java/ title=Java class=md-nav__link> Java </a> </li> <li class=md-nav__item> <a href=../json/ title=JSON class=md-nav__link> JSON </a> </li> <li class=md-nav__item> <a href=../regexp/ title=Regexp class=md-nav__link> Regexp </a> </li> <li class=md-nav__item> <a href=../seq/ title=Seq class=md-nav__link> Seq </a> </li> <li class=md-nav__item> <a href=../set/ title=Set class=md-nav__link> Set </a> </li> <li class=md-nav__item> <a href=../stm/ title=STM class=md-nav__link> STM </a> </li> <li class=md-nav__item> <a href=../system/ title=System class=md-nav__link> System </a> </li> <li class=md-nav__item> <a href=../transducers/ title=Transducers class=md-nav__link> Transducers </a> </li> <li class=md-nav__item> <a href=../tuple/ title=Tuple class=md-nav__link> Tuple </a> </li> <li class=md-nav__item> <a href=../types/ title=Types class=md-nav__link> Types </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-15 type=checkbox id=nav-6-15> <label class=md-nav__link for=nav-6-15> Context <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Context data-md-level=2> <label class=md-nav__title for=nav-6-15> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Context </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../context/local/ title=context\Local class=md-nav__link> context\Local </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-16 type=checkbox id=nav-6-16> <label class=md-nav__link for=nav-6-16> Functions <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Functions data-md-level=2> <label class=md-nav__title for=nav-6-16> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../functions/async/ title=async class=md-nav__link> async </a> </li> <li class=md-nav__item> <a href=../functions/eval/ title=eval class=md-nav__link> eval </a> </li> <li class=md-nav__item> <a href=../functions/float/ title=float class=md-nav__link> float </a> </li> <li class=md-nav__item> <a href=../functions/identity/ title=identity class=md-nav__link> identity </a> </li> <li class=md-nav__item> <a href=../functions/int/ title=int class=md-nav__link> int </a> </li> <li class=md-nav__item> <a href=../functions/never/ title=never class=md-nav__link> never </a> </li> <li class=md-nav__item> <a href=../functions/sleep/ title=sleep class=md-nav__link> sleep </a> </li> <li class=md-nav__item> <a href=../functions/str/ title=str class=md-nav__link> str </a> </li> <li class=md-nav__item> <a href=../functions/timeout/ title=timeout class=md-nav__link> timeout </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-17 type=checkbox id=nav-6-17> <label class=md-nav__link for=nav-6-17> Http <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Http data-md-level=2> <label class=md-nav__title for=nav-6-17> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Http </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../http/client/ title=http\Client class=md-nav__link> http\Client </a> </li> <li class=md-nav__item> <a href=../http/server/ title=http\Server class=md-nav__link> http\Server </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-18 type=checkbox id=nav-6-18> <label class=md-nav__link for=nav-6-18> Java <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Java data-md-level=2> <label class=md-nav__title for=nav-6-18> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../java/types/ title=java\Types class=md-nav__link> java\Types </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-19 type=checkbox id=nav-6-19> <label class=md-nav__link for=nav-6-19> Misc <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Misc data-md-level=2> <label class=md-nav__title for=nav-6-19> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../misc/timetuple/ title="Duration specified as a tuple" class=md-nav__link> Duration specified as a tuple </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#usage class=md-nav__link> Usage </a> <nav class=md-nav aria-label=Usage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#opening-a-file class=md-nav__link> Opening a file </a> </li> <li class=md-nav__item> <a href=#opening-closing class=md-nav__link> Opening and closing files with context managers </a> </li> <li class=md-nav__item> <a href=#deleting-a-file class=md-nav__link> Deleting a file </a> </li> <li class=md-nav__item> <a href=#seeking-to-a-position-in-a-file class=md-nav__link> Seeking to a position in a file </a> </li> <li class=md-nav__item> <a href=#creating-a-temporary-file class=md-nav__link> Creating a temporary file </a> </li> <li class=md-nav__item> <a href=#obtaining-a-path-from-a-file-handle class=md-nav__link> Obtaining a path from a file handle </a> </li> <li class=md-nav__item> <a href=#listing-files-in-a-directory class=md-nav__link> Listing files in a directory </a> </li> <li class=md-nav__item> <a href=#read-lines class=md-nav__link> Reading file - line mode </a> </li> <li class=md-nav__item> <a href=#reading-file-all-at-once class=md-nav__link> Reading file - all at once </a> </li> <li class=md-nav__item> <a href=#writing-to-file class=md-nav__link> Writing to file </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/yona-lang/yona/edit/master/docs/stdlib/file.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>File</h1> <p>This module provides functions for reading, writing and otherwise manipulating files.</p> <h2 id=usage>Usage<a class=headerlink href=#usage title="Permanent link">&para;</a></h2> <p>All file access is non-blocking and asynchronous. Behind the courtains, file operations use <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/channels/AsynchronousFileChannel.html>AsynchronousFileChannel</a>. Files can be worked in either text or binary mode. Text mode anticipates that file is encoded in UTF-8 encoding, whereas binary file may contain any contents.</p> <h3 id=opening-a-file>Opening a file<a class=headerlink href=#opening-a-file title="Permanent link">&para;</a></h3> <p>File must be opened before used. Function <code>open</code> takes a path and set of file "modes" as arguments and returns a file handle. This handle is actually a tuple with several items, that should not be accessed directly, but instead handled to functions operating on a file, from this module.</p> <p>Opening file for reading, in a text mode, for example:</p> <div class=highlight><pre><span></span><code><span class=nf>fh</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>open</span> <span class=s>&quot;test.txt&quot;</span> <span class=p>{</span><span class=kt>:</span><span class=n>read</span><span class=p>}</span>
</code></pre></div> <p>Available modes (for further details, refer to Java's <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/StandardOpenOption.html>StandardOpenOption</a>):</p> <table> <thead> <tr> <th>Mode</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>:read</code></td> <td>Open for read access.</td> </tr> <tr> <td><code>:write</code></td> <td>Open for write access.</td> </tr> <tr> <td><code>:append</code></td> <td>If the file is opened for <code>:write</code> access then bytes will be written to the end of the file rather than the beginning.</td> </tr> <tr> <td><code>:truncate_existing</code></td> <td>If the file already exists and it is opened for <code>:write</code> access, then its length is truncated to 0.</td> </tr> <tr> <td><code>:create</code></td> <td>Create a new file if it does not exist.</td> </tr> <tr> <td><code>:create_new</code></td> <td>Create a new file, failing if the file already exists.</td> </tr> <tr> <td><code>:delete_on_close</code></td> <td>Delete on close.</td> </tr> <tr> <td><code>:sparse</code></td> <td>Sparse file.</td> </tr> <tr> <td><code>:sync</code></td> <td>Requires that every update to the file's content or metadata be written synchronously to the underlying storage device.</td> </tr> <tr> <td><code>:dsync</code></td> <td>Requires that every update to the file's content be written synchronously to the underlying storage device.</td> </tr> </tbody> </table> <h3 id=opening-closing>Opening and closing files with <a href=/features/resource-management#context-managers>context managers</a><a class=headerlink href=#opening-closing title="Permanent link">&para;</a></h3> <p><a href=/docs/resource-management.md#context-managers>Context managers</a> are the recommended way of dealing with files. They provide error handling, such that the user does not need to worry about properly closing files in all situations. Using files as context managers is really simple, since it requires nothing more than the <code>open</code> function, that already returns a context manager!</p> <p>Therefore using files in this way is as simple as writing: <div class=highlight><pre><span></span><code><span class=nf>with</span> <span class=kt>File</span><span class=ow>::</span><span class=n>open</span> <span class=s>&quot;File.txt&quot;</span> <span class=p>{</span><span class=kt>:</span><span class=n>read</span><span class=p>}</span> <span class=n>as</span> <span class=n>file</span>
    <span class=kt>File</span><span class=ow>::</span><span class=n>read_lines</span> <span class=n>file</span>
<span class=nf>end</span>
</code></pre></div></p> <p>There is no need to explicitly close files when using context managers.</p> <h3 id=deleting-a-file>Deleting a file<a class=headerlink href=#deleting-a-file title="Permanent link">&para;</a></h3> <p>Function to delete an existing file takes a file handle a returns a <code>()</code>.</p> <div class=highlight><pre><span></span><code><span class=kt>File</span><span class=ow>::</span><span class=n>delete</span> <span class=n>fh</span>
</code></pre></div> <h3 id=seeking-to-a-position-in-a-file>Seeking to a position in a file<a class=headerlink href=#seeking-to-a-position-in-a-file title="Permanent link">&para;</a></h3> <p>Seeking to a position takes a file handle, new position (integer) and returns an updated file handle:</p> <div class=highlight><pre><span></span><code><span class=nf>new_fh</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>seek</span> <span class=n>fh</span> <span class=n>position</span>
</code></pre></div> <h3 id=creating-a-temporary-file>Creating a temporary file<a class=headerlink href=#creating-a-temporary-file title="Permanent link">&para;</a></h3> <p>In order to create a temporary file in a system temp folder, pass a prefix (string), suffix (string) and a set of file modes. Function returns a new handle, with a newly created temporary file, opened using the specified file modes. The file will be kept after use, unless <code>:delete_on_close</code> option was specified.</p> <div class=highlight><pre><span></span><code><span class=nf>fh</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>make_temp</span> <span class=s>&quot;prefix&quot;</span> <span class=s>&quot;suffix&quot;</span> <span class=p>{</span><span class=kt>:</span><span class=n>write</span><span class=p>}</span>
</code></pre></div> <h3 id=obtaining-a-path-from-a-file-handle>Obtaining a path from a file handle<a class=headerlink href=#obtaining-a-path-from-a-file-handle title="Permanent link">&para;</a></h3> <p>It can be useful to obtain a path from a file handle, for example when working with temporary files. Path is a string.</p> <div class=highlight><pre><span></span><code><span class=nf>path</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>path</span> <span class=n>fh</span>
</code></pre></div> <h3 id=listing-files-in-a-directory>Listing files in a directory<a class=headerlink href=#listing-files-in-a-directory title="Permanent link">&para;</a></h3> <p>To list files in a directory, use function <code>list_dir</code>. Note that this function does not recurse over nested subfolders.</p> <div class=highlight><pre><span></span><code><span class=nf>files</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>list_dir</span> <span class=s>&quot;./&quot;</span>
</code></pre></div> <h3 id=read-lines>Reading file - line mode<a class=headerlink href=#read-lines title="Permanent link">&para;</a></h3> <p>File can be read either as a whole, or in lines (provided that it is a text file). Lines may be separated by either <code>\n</code> or <code>\r\n</code>. Function <code>read_line</code> expects a file handle, and returns either <code>:eof</code> if the whole file was already read, or a triple of: * <code>:ok</code> * body - either a byte sequence or a string, depending on a mode file is opened in * new file handle</p> <p>Counting lines in a file can be implemented for example this way:</p> <div class=highlight><pre><span></span><code><span class=nf>count_file_lines</span> <span class=n>file</span> <span class=ow>=</span> <span class=n>read_lines</span> <span class=n>fh</span> <span class=mi>0</span>

<span class=nf>read_lines</span> <span class=n>fh</span> <span class=n>acc</span> <span class=ow>=</span>
    <span class=kr>case</span> <span class=kt>File</span><span class=ow>::</span><span class=n>read_line</span> <span class=n>fh</span> <span class=kr>of</span>
        <span class=p>(</span><span class=kt>:</span><span class=n>ok</span><span class=p>,</span> <span class=kr>_</span><span class=p>,</span> <span class=n>new_fh</span><span class=p>)</span>  <span class=ow>-&gt;</span> <span class=n>read_lines</span> <span class=n>new_fh</span> <span class=p>(</span><span class=n>acc</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
        <span class=kt>:</span><span class=n>eof</span>              <span class=ow>-&gt;</span> <span class=n>acc</span>
    <span class=n>end</span>
</code></pre></div> <p>Function <code>read_all_lines</code> will count the number of lines in a file.</p> <p>For convenience, module <code>File</code> comes with a function <code>read_lines</code> which takes a file handle and returns a sequence of all lines.</p> <p>Example: <div class=highlight><pre><span></span><code><span class=nf>lines</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>read_lines</span> <span class=n>fh</span>
</code></pre></div></p> <h3 id=reading-file-all-at-once>Reading file - all at once<a class=headerlink href=#reading-file-all-at-once title="Permanent link">&para;</a></h3> <p>To read the whole file, use function <code>read</code>. This function returns a sequence containing the contents of the file (either as a string, or sequence of bytes, depending on the mode in which the file is opened).</p> <div class=highlight><pre><span></span><code><span class=nf>file_contents</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>read</span> <span class=n>file</span>
</code></pre></div> <h3 id=writing-to-file>Writing to file<a class=headerlink href=#writing-to-file title="Permanent link">&para;</a></h3> <p>Writing to file requires a file to be opened in a <code>:write</code> mode. The <code>write</code> functin expects a file handle and a sequence (string or a byte sequence) to be written to the file. The sequence will be written at whatever position the file handle is currently pointing to.</p> <div class=highlight><pre><span></span><code><span class=kt>File</span><span class=ow>::</span><span class=n>write</span> <span class=n>temp_file</span> <span class=s>&quot;hello world&quot;</span>
</code></pre></div> <hr> <div class=md-source-date> <small> Last update: July 7, 2020 </small> </div> </article> </div> </div> </main> </div> <script src=../../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../../assets/javascripts/bundle.b39636ac.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>